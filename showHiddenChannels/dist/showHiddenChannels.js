function h(n){window.enmity.plugins.registerPlugin(n)}function p(n){return window.enmity.patcher.create(n)}function r(...n){return window.enmity.getModuleByProps(n)}function y(){const n=new WebSocket("ws://10.0.0.83:1234");let e=!1,o=!1,a=[];return n.onopen=()=>{e=!0;for(const d of a)n.send(d)},n.onerror=()=>o=!0,new Proxy({},{get:(d,f)=>(...E)=>{if(o)return;const i={time:Date.now(),type:f,arguments:E,delayed:!1};if(!e)return i.delayed=!0,a.push(JSON.stringify(i));n.send(JSON.stringify(i))}})}const l=y(),u=r("getChannelPermissions").default,C=u.can.bind({}),N=r("hasUnread").default,{getChannel:T}=r("getChannel").default,{ChannelTypes:t}=r("ChannelTypes"),{Permissions:c}=r("Permissions"),s=p("showHiddenChannels"),g={ignore:[t.DM,t.GROUP_DM,t.GUILD_CATEGORY],good:[t.GUILD_TEXT,t.GUILD_VOICE,t.GUILD_STAGE_VOICE,t.GUILD_ANNOUNCEMENT,t.ANNOUNCEMENT_THREAD,t.PRIVATE_THREAD,t.PUBLIC_THREAD]};function _(n){let e=n;return typeof n=="string"&&(e=T(n)),!e||g.ignore.includes(e.type)?!0:g.good.includes(e.type)&&C(c.VIEW_CHANNEL,e)}const w={name:"showHiddenChannels",patches:[],onStart(){s.after(u,"can",(n,[e],o)=>e===c.VIEW_CHANNEL?!0:o),s.after(N,"hasUnread",(n,e,o)=>{if(!_(e[0]))return!1}),l.log("onStart")},onStop(){l.log("onStop"),s.unpatchAll()}};h(w);
