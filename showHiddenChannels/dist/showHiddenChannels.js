function p(n){window.enmity.plugins.registerPlugin(n)}function N(n){return window.enmity.patcher.create(n)}function f(n,e=!0){return window.enmity.getModule(n,e)}function a(...n){var e;return((e=f(r=>n.every(o=>r.default&&r.default.includes(o))))==null?void 0:e.default)||f(r=>n.every(o=>r&&r.includes(o)))}function T(){const n=new WebSocket("ws://10.0.0.83:1234");let e=!1,i=!1,r=[];return n.onopen=()=>{e=!0;for(const o of r)n.send(o)},n.onerror=()=>i=!0,new Proxy({},{get:(o,E)=>(...h)=>{if(i)return;const u={time:Date.now(),type:E,arguments:h,delayed:!1};if(!e)return u.delayed=!0,r.push(JSON.stringify(u));n.send(JSON.stringify(u))}})}const c=T(),g=a("getChannelPermissions"),d=a("hasUnread"),{getChannel:_}=a("getChannel"),{Permissions:y,ChannelTypes:t}=a("Permissions","ChannelTypes"),w=g.can.bind({}),s=N("showHiddenChannels"),C={ignore:[t.DM,t.GROUP_DM,t.GUILD_CATEGORY],good:[t.GUILD_TEXT,t.GUILD_VOICE,t.GUILD_STAGE_VOICE,t.GUILD_ANNOUNCEMENT,t.ANNOUNCEMENT_THREAD,t.PRIVATE_THREAD,t.PUBLIC_THREAD]};function l(n){let e=n;return typeof n=="string"&&(e=_(n)),!e||C.ignore.includes(e.type)||C.good.includes(e.type)&&w(y.VIEW_CHANNEL,e)}const A={name:"showHiddenChannels",patches:[],onStart(){s.after(g,"can",(n,[e],i)=>{if(e===y.VIEW_CHANNEL)return!0}),s.after(d,"hasUnread",(n,e,i)=>{if(!l(e[0]))return!1}),s.after(d,"hasUnreadPins",(n,e,i)=>{if(!l(e[0]))return!1}),s.after(d,"getMentionCount",(n,e,i)=>{if(!l(e[0]))return 0}),c.log("onStart")},onStop(){c.log("onStop"),s.unpatchAll()}};p(A);
